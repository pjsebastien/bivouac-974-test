{% extends 'base.html.twig' %} {% block title %}Profil de {{ app.user.firstname }} {{ app.user.name }}{%
endblock %} {% block body %}

<div class="grix xs4 container">
  {% for message in app.flashes('message') %}
  <div class="col-xs4">
    <div class="p-3 my-2 rounded-2 success">{{message}}</div>
  </div>
  
    
  {% endfor %}
  <div class="col-xs4">
    <h1>Profil de {{ app.user.firstname }} {{ app.user.name }}</h1>
  </div>
  <div class="col-xs1">Nom :</div>
  <div class="col-xs3">{{ app.user.name }}</div>
  <div class="col-xs1">Pr√©nom :</div>
  <div class="col-xs3">{{ app.user.firstname }}</div>
  <div class="col-xs1">Email :</div>
  <div class="col-xs3">{{ app.user.Email }}</div>
  <div class="col-xs4">
    <a href="{{path('users_profil_modifier')}}" class="btn shadow-1 rounded-1 blue">Modifier le profil</a>
    <a href="{{path('users_pass_modifier')}}" class="btn shadow-1 rounded-1 blue">Modifier le mot de passe</a>
  </div>
  <div class="col-xs4">
    <h1>Mes bivouacs ({{app.user.categories|length}})</h1>
  </div>
  {# !!!! Attention je ne sais pas pourquoi mais ici le contenu de la table bivouac s'obtiens avec categorie... #}


  <div class="flex flex-wrap -m-4" >
  {% for bivouac in app.user.categories %}
        <div class=" sm:w-full xl:w-1/4 md:w-1/2 p-4">
            <div class="bg-gray-100 p-6  rounded-lg">
                
                <img class="h-40 rounded w-full object-cover object-center mb-6" src="{{asset('uploads/' ~ bivouac.images[0].name )|imagine_filter('square')}}" alt="{{bivouac.title}}">
                <h3 class="tracking-widest text-green-500 text-xs font-medium title-font">{{bivouac.categories.name}}</h3>
                            
                {% for tag in bivouac.tags %} 
                    <a class="inline-flex items-center h-5 px-2 m-1 text-xs text-black transition-colors duration-150 bg-gray-300 rounded-lg focus:shadow-outline hover:bg-gray-600" href="#">{{tag.name}}</a>
                
                {% endfor %}
                {% for region in bivouac.regions %}
                    <a class="inline-flex items-center h-8 px-2 m-1 text-xs text-white transition-colors duration-150 bg-green-500 rounded-lg focus:shadow-outline hover:bg-green-600" href="#">{{region.name}}</a>
                {% endfor %}

                <h2 class="text-lg text-gray-900 font-medium title-font mb-4"><a href="{{path('bivouacs_details', {slug : bivouac.slug})}}">{{bivouac.title}}</a></h2>
                {# Attention la description est en html, on met le filtre striptags pour y remedier et si l'annonce est trop longue on limite le nombre de caractere on parametre avec twig string extra #}
                <p class="leading-relaxed text-base h-24">{{bivouac.content|striptags|u.truncate(80, '...')}}</p>
                <div class="text-green-600">		
                    {% if is_granted("ROLE_USER") %}
                        {% for favoris in bivouac.favoris %}
                            {% if favoris.id == app.user.id %}
                            <a href="{{path('bivouacs_retrait_favoris', {id: bivouac.id})}}">
                                <i class="fas fa-heart"></i>
                            </a>
                            {% else %}
                            <a href="{{path('bivouacs_ajout_favoris', {id: bivouac.id})}}">
                                <i class="far fa-heart"></i>
                            </a>	
                            {% endif %}
                        {% else %}
                            <a href="{{path('bivouacs_ajout_favoris', {id: bivouac.id})}}">
                                <i class="far fa-heart"></i>
                            </a>
                        {% endfor %}
                    {% else %}
                        <i class="far fa-heart"></i>	
                    {% endif %}
                    <a class="float-right" href="{{path('bivouacs_details', {slug : bivouac.slug})}}">Lire plus...</a>
                </div>
                
            </div>
        </div>
        {% endfor %}
      </div>
  
</div>

{% endblock %}
